#Rewrite to fix /mobile /GPT_URL 404 errors
# https://stackoverflow.com/questions/39377750/nginx-location-rewrite-url-with-or-without-trailing-slash

    # redirect /mobile/ and /mobile to parent url
    rewrite ^(.*/)mobile/?$ $1 permanent;
    # redirect /amp/ and /amp to parent url
    rewrite ^(.*/)amp/?$ $1 permanent;
    # redirect /null/ and /null to parent url
    rewrite ^(.*/)null/?$ $1 permanent;
    # redirect /href/ and /href to parent url
    rewrite ^(.*/)href/?$ $1 permanent;
    # redirect /comment-subscriptions/, /comment-3341/, etc. to parent url
    rewrite ^(.*/)comment-(.*/?)$ $1/#disqus_thread permanent;
    # redirect /feeds/ to /feed/
    rewrite ^(.*/)feeds/?$ $1/feed/ permanent;
    # redirect /post-slug/feed/ to /feed/
    rewrite ^(.*/)(.*/)feed/?$ $1/feed/ permanent;
    # deleted posts
    rewrite ^(.*/)htpc-news-roundup(.*)$ $1 permanent; #forward htpc news roundups to homepage    
    rewrite ^(.*/)smart-home-news-roundup(.*)$ $1 permanent; #forward htpc news roundups to homepage    
    rewrite ^(.*/)openelec-4(.*)$ $1/openelec-released-raspberry-pi-update-instructions/ permanent;
    rewrite ^(.*/)openelec-3(.*)$ $1/openelec-released-raspberry-pi-update-instructions/ permanent;
    rewrite ^(.*/)openelec-6(.*)$ $1/openelec-released-raspberry-pi-update-instructions/ permanent;
    rewrite ^(.*/)openelec-5(.*)$ $1/openelec-released-raspberry-pi-update-instructions/ permanent;
    rewrite ^(.*/)qbittorrent-3(.*)$ $1/qbittorrent-released-installation-and-upgrade/ permanent;
    rewrite ^(.*/)qbittorrent-v3(.*)$ $1/qbittorrent-released-installation-and-upgrade/ permanent;
    rewrite ^(.*/)transmission-2(.*)$ $1/transmission-released-installation-and-upgrade/ permanent;
    rewrite ^(.*/)sabnzbd-0(.*)$ $1/sabnzbd-released-installation-upgrade/ permanent;
    rewrite ^(.*/)sabnzbd-1(.*)$ $1/sabnzbd-released-installation-upgrade/ permanent;
    rewrite ^(.*/)webmin-1(.*)$ $1/webmin-released-installation-and-upgrade/ permanent;
    rewrite ^(.*/)phpmyadmin-4(.*)$ $1/phpmyadmin-released-installation-and-upgrade/ permanent;
    rewrite ^(.*/)deluge-torrent-1(.*)$ $1/deluge-torrent-released-installation-and-upgrade/ permanent;
    rewrite ^(.*/)adbfire-201(.*)$ $1/install-and-configure-adblink-for-amazon-fire-tv/ permanent;
    rewrite ^(.*/)minidlna-1(.*)$ $1/install-minidlna-on-ubuntu-ultimate-guide/ permanent;
    # add to any 404s /slug/\"https:\/\/www.addtoany.com\/share\
    # enable this # rewrite ^(/.*/.*)addtoany(.*)$ https://www.simplehomelab.com/$1 permanent; 
    # remove weird characters at the end of 404s
    # enable this # rewrite ^(/.*/.*)t3=(.*)$ https://www.simplehomelab.com/$1 permanent; # ,t3=nav... and '',t3=nav
    # rewrite ^(.*/\'/)$ $1 permanent; # /single quote/
    # #rewrite ^(.*/)*5C*m3=$ $1 permanent;
    # #rewrite ^(.*/)admin/$ $1/wp-admin/ permanent;
    # #the one below does not seem to work
    # #rewrite ^(.*/)[GPT_URL]$ $1 permanent;



    #rewrite ^(/.*/.*)m3=(.*)$ https://www.simplehomelab.com/$1 permanent; # ,m3= and '',m3=